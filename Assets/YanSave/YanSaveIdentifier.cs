using UnityEngine;
using System.Collections.Generic;
using System;

public class YanSaveIdentifier : MonoBehaviour
{
    public string ObjectID;
    [HideInInspector] public bool AutoGenerated;
    [HideInInspector] public List<Component> EnabledComponents = new List<Component>();
    [HideInInspector] public List<DisabledYanSaveMember> DisabledProperties = new List<DisabledYanSaveMember>();
    [HideInInspector] public List<DisabledYanSaveMember> DisabledFields = new List<DisabledYanSaveMember>();
    [HideInInspector] public bool InitializedInspector = false;

    private static List<YanSaveIdentifier> Identifiers = new List<YanSaveIdentifier>();

    public static GameObject GetObject(string id)
    {
        foreach (YanSaveIdentifier identifier in Identifiers)
            if (identifier.ObjectID == id) return identifier.gameObject;
        return null;
    }

    public static GameObject GetObject(SerializedGameObject serializedGameObject)
    {
        foreach (YanSaveIdentifier identifier in Identifiers)
            if (identifier.ObjectID == serializedGameObject.ObjectID) return identifier.gameObject;
        return null;
    }

    public void OnEnable() 
    {
        if (!Identifiers.Contains(this)) Identifiers.Add(this);
        if (string.IsNullOrEmpty(ObjectID))
            ObjectID = gameObject.name;
    }
    
    public void OnDestroy()
    {
        Identifiers.Remove(this);
    }
}

[Serializable]
public struct DisabledYanSaveMember
{
    public Component Component;
    public string Name;
}